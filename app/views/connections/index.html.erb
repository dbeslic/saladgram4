<div class="page-header">
  <h1>
    Connections

    <!--Only admin can create new connection here. Most users have to doing it via the "Join Chat" button in Chat#Show-->
    <% if current_user.present? %>
      <% if current_user.admin? %>
        <%= link_to "Create New Connection", new_connection_path, class: "btn btn-lg btn-success" %>
      <% end %>
    <% end %>
  </h1>
</div>

<div class="row">
  <div class="col-md-12">
    <table class="table table-striped table-hover">
      <tr>

        <th>Chat</th>

        <th>Chat ID</th>

        <th>Participant</th>

        <th>User ID</th>

        <th>Actions</th>
      </tr>

      <% @connections.each do |connection| %>
      <tr>

        <td>
          <a href ="chats/<%= connection.chat_id %>">
            <%= connection.chat.title %>
          </a>
        </td>

        <td><%= connection.chat_id %></td>

        <td>
          <a href="users/<%= connection.user.user_name %>">
            <%= connection.user.user_name %>
          </a>
        </td>

        <td><%= connection.user_id %></td>

        <td>

          <%= link_to "Show", connection_path(connection.id), class: "btn btn-primary", method: 'get' %>
          <%= link_to "Edit", edit_connection_path(connection.id), class: "btn btn-warning", method: 'get' %>
          <%= link_to "Delete", connection_path(connection.id), class: "btn btn-danger", method: 'delete' %>

        </td>
      </tr>
      <% end %>
    </table>
  </div>
</div>
